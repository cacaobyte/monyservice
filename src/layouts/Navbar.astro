---
import Navitem from "../components/shared/Navitem.astro";
import BtnLink from "../components/shared/BtnLink.astro";
import BtnThemeSwitch from "../components/shared/BtnThemeSwitch.astro";

const navItems = [
  { href: "#", text: "Hogar" },
  { href: "#services", text: "Servicios" },
  { href: "#innovations", text: "Innovaciones" },
  { href: "#testimonials", text: "Testimonios" },
  { href: "#environment", text: "Ambiente" },
  { href: "#projects", text: "Proyectos" },
];
---

<header class="fixed top-0 inset-x-0 z-50 bg-white/80 backdrop-blur-md shadow-sm border-b border-gray-200 dark:bg-base-dark-800/90 dark:border-base-dark-700">
  <nav class="max-w-7xl mx-auto px-6 py-3 flex items-center justify-between gap-6 relative">
    
    <!-- Logo -->
    <a href="/" class="flex items-center gap-3 group transition-all">
      <div class="h-12 w-12 rounded-full bg-white ring-2 ring-primary shadow-lg overflow-hidden">
        <img
          src="/wind3.jpeg"
          alt="Monica Cleaning Logo"
          class="object-contain w-full h-full p-1 scale-100 group-hover:scale-105 transition-transform duration-300 ease-in-out"
        />
      </div>
      <span class="text-lg font-semibold tracking-tight text-heading-1 group-hover:text-primary transition-colors hidden sm:inline">
        MÃ³nica Limpieza
      </span>
    </a>

    <!-- Desktop nav -->
    <div class="hidden lg:flex items-center gap-6">
      <ul class="flex gap-6 text-sm font-medium text-heading-2 dark:text-white">
        {
          navItems.map((item) => {
            return <Navitem {...item} />;
          })
        }
      </ul>

      <BtnLink
        text="Empezar"
        href="#cta"
        className="ml-6 text-sm hidden lg:block"
        variant="cta"
      />
    </div>

    <!-- Always visible: theme switch + mobile toggle -->
    <div class="flex items-center gap-3">
      <!-- ðŸŒ— Theme switch: now visible on ALL screen sizes -->
      <BtnThemeSwitch variant="primary" />

      <!-- ðŸ” Toggle only for mobile -->
      <button
        id="mobileToggle"
        aria-label="Toggle navigation"
        class="outline-none w-7 h-auto flex flex-col relative lg:hidden"
      >
        <span class="w-6 h-0.5 rounded-full bg-black dark:bg-white transition-all"></span>
        <span class="w-6 h-0.5 mt-1 rounded-full bg-black dark:bg-white transition-all"></span>
        <span class="w-6 h-0.5 mt-1 rounded-full bg-black dark:bg-white transition-all"></span>
        <span class="sr-only">Toggle navigation</span>
      </button>
    </div>

    <!-- Mobile nav -->
    <div
      id="mobileNav"
      class="hidden absolute top-full left-0 w-full flex-col items-center bg-white dark:bg-base-dark-800 px-6 py-6 shadow-md lg:hidden z-40"
    >
      <ul class="flex flex-col gap-5 text-base font-medium text-gray-800 dark:text-white text-center">
        {
          navItems.map((item) => {
            return <Navitem {...item} />;
          })
        }
      </ul>
    </div>
  </nav>

  <!-- JS toggle script -->
  <script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
      const toggle = document.getElementById("mobileToggle");
      const mobileNav = document.getElementById("mobileNav");

      toggle.addEventListener("click", () => {
        mobileNav.classList.toggle("hidden");
      });
    });
  </script>
</header>
